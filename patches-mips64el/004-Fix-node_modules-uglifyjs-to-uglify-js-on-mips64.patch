From 971b43ae2b70f59dcd71595cac0b264fc4466db3 Mon Sep 17 00:00:00 2001
From: Wang Qing <wangqing-hf@loongson.cn>
Date: Wed, 27 Sep 2017 11:20:57 +0800
Subject: [PATCH] Fix node_modules uglifyjs to uglify-js on mips64.

---
 third_party/node/node_modules.py | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/third_party/node/node_modules.py b/third_party/node/node_modules.py
index 9f30711..7d0f46f 100755
--- a/third_party/node/node_modules.py
+++ b/third_party/node/node_modules.py
@@ -3,6 +3,7 @@
 # Use of this source code is governed by a BSD-style license that can be
 # found in the LICENSE file.
 
+import platform
 from os import path as os_path
 
 
@@ -26,4 +27,8 @@ def PathToPolymerCssBuild():
 
 
 def PathToUglifyJs():
- return _path_in_node_modules('uglifyjs', 'bin', 'uglifyjs')
+ if platform.uname()[5] == 'mips64':
+   return _path_in_node_modules('uglify-js', 'bin', 'uglifyjs')
+ else:
+   return _path_in_node_modules('uglifyjs', 'bin', 'uglifyjs')
+
-- 
2.1.0
